# 条件判断式



## 两种判断格式

- `test -e /root/anaconda-ks.cfg`

```bash
$ test -e /root/anaconda-ks.cfg
$ echo $?
0

$ test -e /root/anaconda-ks.cfg && echo "yes" || echo "no"
yes
```



- `[ -e /root/anaconda-ks.cfg ]`
  - 推荐这种

```bash
$ [ -e /root/anaconda-ks.cfg ]
$ echo $?
0

$ [ -e /root/anaconda-ks.cfg ] && echo "yes" || echo "no"
yes
```



## 按照文件类型进行判断

| 测试选项  | 作用                                                         |
| --------- | ------------------------------------------------------------ |
| `-b 文件` | 判断该文件是否存在，并且是否为块设备文件(是块设备文件为真)   |
| `-c 文件` | 判断该文件是否存在，并且是否为字符设备文件(是字符设备文件为真) |
| `-d 文件` | 判断该文件是否存在，并且是否为目录文件(是目录文件为真)       |
| `-e 文件` | 判断该文件是否存在(存在为真)                                 |
| `-f 文件` | 判断该文件是否存在，并且是否为普通文件(是普通文件为真)       |
| `-L 文件` | 判断该文件是否存在，并且是否为符号链接文件(是符号链接文件为真) |
| `-p 文件` | 判断该文件是否存在，并且是否为管道文件(是管道文件为真)       |
| `-s 文件` | 判断该文件是否存在，并且是否为非空(非空为真)                 |
| `-S 文件` | 判断该文件是否存在，并且是否为夽接字文件(是夽接字文件为真)   |



## 按照文件权限进行判断

| 测试选项  | 作用                                                         |
| --------- | ------------------------------------------------------------ |
| `-r 文件` | 判断该文件是否存在，并且是否该文件拥有读权限(有读权限为真)   |
| `-w 文件` | 判断该文件是否存在，并且是否该文件拥有写权限(有写权限为真)   |
| `-x 文件` | 判断该文件是否存在，并且是否该文件拥有执行权限(有执行权限为真) |
| `-u 文件` | 判断该文件是否存在，并且是否该文件拥有`SUID`权限(有`SUID`权限为真) |
| `-g 文件` | 判断该文件是否存在，并且是否该文件拥有`SGID`权限(有`SGID`权限为真) |
| `-k 文件` | 判断该文件是否存在，并且是否该文件拥有`SBit`权限(有`SBit`权限为真) |

```bash
# 不会区分用户身份，只要有写权限就会判断为真
$ [ -w /root/install.log ]  && echo "yes" || echo "no"
```



## 两个文件之间进行比较

| 测试选项          | 作用                                                         |
| ----------------- | ------------------------------------------------------------ |
| `文件1 -nt 文件2` | 判断文件1的修改时间是否比文件2的新(如果新则为真)             |
| `文件1 -ot 文件2` | 判断文件1的修改时间是否比文件2的旧(如果旧则为真)             |
| `文件1 -ef 文件2` | 判断文件1是否和文件2的`Inode`号一致，可以理解为两个文件是否为同一个文件。这个用于判断硬链接是很好的方法 |

```bash
# 创建硬链接
$ ln /root/student.txt /tmp/stu.txt
# 判断Inode号是否一致，一致则表示两个文件是硬链接
$ [ /root/student.txt -ef /tmp/stu.txt ] && echo yes || echo no	
yes
```



## 字符串的判断

| 测试选项         | 作用                                         |
| ---------------- | -------------------------------------------- |
| `-z 字符串`      | 判断字符串是否为空(为空反回真)               |
| `-n 字符串`      | 判断字符串是否为非空(非空返回真)             |
| `字串1 == 字串2` | 判断字符串1是否和字符串2相等(相等返回真)     |
| `字串1 != 字串2` | 判断字符串1是否和字符串2不相等(不相等返回真) |

```bash
$ name=lisi
$ [ -z "$name" ] && echo "yes" || echo "no"	# 变量name是否为空
no	

$ aa=11
$ bb=22
$ [ $aa == $bb ] && echo "yes" || echo "no"	# 变量aa和bb是否相等
no
```



## 多重条件判断

| 测试选项         | 作用                                             |
| ---------------- | ------------------------------------------------ |
| `判断1 -a 判断2` | 逻辑与，判断1和判断2都成立，最终的结果才为真     |
| `判断1 -o 判断2` | 逻辑或，判断1和判断2有一个成立，最终的结果就为真 |
| `!判断`          | 逻辑非，使用原始的判断式取反                     |

```bash
$ aa=24
# aa不为空且大于23吗
$ [ -n "$aa" -a "$aa" -gt 23 ] && echo "yes" || echo "no"
yes
```



